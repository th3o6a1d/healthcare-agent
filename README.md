# Healthcare Agent

A conversational AI assistant for querying and analyzing synthetic patient healthcare data. This agent uses OpenAI's API with function calling to interact with a SQLite database containing Synthea-generated synthetic patient records.

## Features

- **Interactive Chat Interface**: Natural language conversation with the AI assistant
- **Database Querying**: Execute SQL queries against patient data (read-only)
- **Patient Data Retrieval**: Get comprehensive patient information including demographics, medications, labs, procedures, and more
- **Schema Exploration**: Discover database structure and available tables
- **Date Comparisons**: Compare dates and calculate differences
- **Tool Call Visibility**: See all tool calls and results in real-time during conversations

## Prerequisites

- Python 3.8+
- OpenAI API key
- SQLite database with Synthea data (generated from CSV files)

## Installation

1. Clone this repository:
```bash
git clone <repository-url>
cd healthcare-agent
```

2. Install dependencies:
```bash
pip install -r requirements.txt
```

3. Create a `.env` file in the project root with your OpenAI API key:
```bash
OPENAI_API_KEY=your_api_key_here
```

4. Load the Synthea CSV data into SQLite (if not already done):
```bash
python load_sqlite.py
```

This will create `synthea_data.db` from the CSV files in the `csvs/` directory.

## Usage

### Basic Usage

Run the chat interface with the default model (gpt-4o):
```bash
python chat.py
```

### Specify a Different Model

Use the `--model` parameter to specify a different OpenAI model:
```bash
python chat.py --model gpt-4
python chat.py --model gpt-3.5-turbo
python chat.py --model gpt-4o-mini
```

### Example Conversations

Once the chat interface is running, you can ask questions like:
- "What tables are available in the database?"
- "Show me the schema for the patients table"
- "Get all medications for patient 00000000-0000-0000-0000-000000000001"
- "What are the demographics for patient 00000000-0000-0000-0000-000000000001?"
- "Show me all lab results for patient 00000000-0000-0000-0000-000000000001 between 2020-01-01 and 2020-12-31"

Type `exit` or `quit` to end the conversation.

## Available Tools

The agent has access to the following tools:

1. **query_db**: Execute read-only SQL SELECT queries
2. **get_db_schema**: Retrieve the schema of all database tables
3. **get_patient_data**: Get patient data from various tables (demographics, medications, labs, imaging, procedures, conditions, encounters, allergies, immunizations, careplans, devices)
4. **compare_dates**: Compare two dates and calculate differences

## Project Structure

```
healthcare-agent/
├── chat.py              # Main chat interface
├── load_sqlite.py       # Script to load CSV data into SQLite
├── requirements.txt     # Python dependencies
├── synthea_data.db      # SQLite database (generated, not in git)
├── csvs/                # CSV data files
└── tools/
    └── sqlite.py        # Database query functions
```

## Data License

This project uses synthetic patient data generated by **Synthea™**, a synthetic patient population simulator. The Synthea data is licensed under the **Apache License 2.0**.

For more information about Synthea, visit: https://github.com/synthetichealth/synthea

## License

This project's code is provided as-is. Please refer to the Synthea license for information regarding the synthetic data used in this project.

## Notes

- The database queries are read-only for safety
- The SQLite database file (`synthea_data.db`) is excluded from version control (see `.gitignore`)
- Tool calls and results are displayed in the chat interface for transparency

